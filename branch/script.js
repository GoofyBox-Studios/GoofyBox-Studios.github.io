/* global Input player */

const canvas = document.getElementById("canvas");
canvas.width  = window.innerWidth / 2;
canvas.height = window.innerHeight;
const ctx = canvas.getContext("2d");
ctx.font = "bold 25px monospace";
ctx.textAlign = "center";
ctx.textBaseline = "middle";

const songSelect = document.getElementById("songs");

const songs = {
  troll: {
    src: "https://jummbus.bitbucket.io/#j5N05Trolln450s0k0l00e0ft2ca7g0fj07r1O_U000000000000000000i0o3343T5v0pu50f0000qwB18110Oa0d080H-JJAArrqiih999h0E1b6T1v0pu01f0000q0B1410Oa6d190AbF8B7Q0471Peb9aR0000E2b676T1v0xua8f171q8710Oa70d350AbFhB2Q2ae1Pa514R0000E172T3v0pu03f0000q0B1820Oa0d230Sp99f9c9Vppbaa9gE1b9T4v0puf0f1a0q050Oa0z6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0T4v0tu04f1a0q050Oa6z6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0T3v0Au03f0000q0A1810Oad230SkyAiqjiAccJCDSSE1b9T4v0puf0f1a0q050Oa0z6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0T3v0tu03f0000q0D1830Oa45d080S__qiiiiiiiiiiiiE1bib4zgid18Q4zgid18Q4zgid0005jo001kS0000018Q4zgh4h4h4h4h4h0g410g410g0g410g410g4i4x8i4x8i4x4h4h4h4h4hp28RFAuIEka52xgEka52xgEg530a52xgEka52xgEg520Eo1gEka52xgEka52zgEQt9gEka52xgEka52DgGk0IczQ8yez4zEN8Wciez4zEN8Wcie058Y088Wciez4zEN8Wciez4zw0Oe3i8YzIhQoAt697hyhQoAt697iChQoAuHkhQoAt697hyhQoAt697nKhScAokO_g9Au4Acz8QYBjEQYgMX0F38QG6iFkqmhRmlHV6BgOdaznFQu8cF8p6BgOdazhAqfbcJrM6DAGl61FkIDIcNnOdaxBaZeBAiMPO_gyopvw1r3f5Y08M0e02U1IMPnQVYHlJXSsxj8NgaCaa4t0n8yV4zE2V4n8At0n8yV4zE2wapQUyeDDyWo6xgEka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka502ubFCLEPNtc3gEka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka52w1j541EQ3hE6yChy52xgFyy0Qq1EQ3hEka52xgEk0aoECaq1jgaq1jgaq1jgaq1i0",
    name: "Troll",
    children: [
      {
        src: "https://jummb.us/#j6N0dTroll%208-bitn450s0k0l00e0ft2ca7g0fj07r1O_U000000000000000000i0o2343T9v0pu09f010l300q040Oad010w2h0M00567acdguxAAAywokifeba9bLJIHGFECBzwutronljigeddcbbcvxAxsrgltAMME0c0T0v0pu00f0000q0B1410Oa6d190w2h0E2c0b606T0v0xu00f00010q040Oad010w5h0E1c012T0v0pu00f0000q040Oad040w2h0E0c0T2v0pu15f180q040Oad030w0E0c0T2v0lu02f180q040Oad030w1E0c0T2v0ku02f180q040Oad030w1E0c0T2v0pu15f180q040Oad030w0E0c0T3v0tu03f0000q0D1830Oa45d080S__qiiiiiiiiiiiiE1c0bib4zgid18Q4zgid18Q4zgid0005jo001kS0000018Q4zgh4h4h4h4h4h0g410g410g0g410g410g4i4x8i4x8i4x4h4h4h4h4hp28SFAuwEka52xgEka52xgEg530a52xgEka52xgEg520Eo1gEka52xgEka52zgEQt9gEka52xgEka52DgGk0IczQ8yez4zEN8Wciez4zEN8Wcie058Y088Wciez4zEN8Wciez4zw0Oe3i8YzIhQoAt697hyhQoAt697iChQoAuHkhQoAt697hyhQoAt697nKhScAokO_g9Au4Acz8QYBjEQYgMX0F38QG6iFkqmhRmlHV6BgOdaznFQu8cF8p6BgOdazhAqfbcJrM6DAGl61FkIDIcNnOdaxBaZeBAiMPO_gyopvw1r3f5Y08M0e02U1IMPnQVYHlJXSsxj8NgaCaa4t0n8yV4zE2V4n8At0n8yV4zE2wapQUGeDDyWo6BgEka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka502ubFCLwpUKC1Fka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka52xg0Fyw0qd0Qq1EFAoxgEkaoEwd6wqd0Qq52xgEka502Ca9yCwkQ2CwkQ2CwkQ2Cwkw0",
        children: [],
        name: "8-bit",
      },
      {
        src: "https://jummb.us/#j6N05Trolln450s0k0l00e0ft2ca7g0fj07r1O_U000000000000000000i0o3343T5v0pu50f0000qwB18110Oa0d080H-JJAArrqiih999h0E1c0b6T1v0pu01f0000q0B1410Oa6d190AbF8B7Q0471Peb9aR0000E2c0b676T0v0xu00f030o523a28a010q040Oad020w2h6E1c012T3v0pu03f0000q0B1820Oa0d230Sp99f9c9Vppbaa9gE1c0b9T4v0puf0f1a0q050Oa0z6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0c0T4v0tu04f1a0q050Oa6z6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0c0T3v0Au03f0000q0A1810Oad230SkyAiqjiAccJCDSSE1c0b9T4v0puf0f1a0q050Oa0z6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0c0T3v0tu03f0000q0D1830Oa45d080S__qiiiiiiiiiiiiE1c0bib4zgid18Q4zgid18Q4zgid0005jo001kS0000018Q4zgh4h4h4h4h4h0g410g410g0g410g410g4i4x8i4x8i4x4h4h4h4h4hp28RFAuIEka52xgEka52xgEg530a52xgEka52xgEg520Eo1gEka52xgEka52zgEQt9gEka52xgEka52DgGk0IczQ8yez4zEN8Wciez4zEN8Wcie058Y088Wciez4zEN8Wciez4zw0Oe3i8YzIhQoAt697hyhQoAt697iChQoAuHkhQoAt697hyhQoAt697nKhScAokO_g9Au4Acz8QYBjEQYgMX0F38QG6iFkqmhRmlHV6BgOdaznFQu8cF8p6BgOdazhAqfbcJrM6DAGl61FkIDIcNnOdaxBaZeBAiMPO_gyopvw1r3f5Y08M0e02U1IMPnQVYHlJXSsxj8NgaCaa4t0n8yV4zE2V4n8At0n8yV4zE2wapQUyeDDyWo6xgEka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka502ubFCLEPNtc3gEka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka52w1j541EQ3hE6yChy52xgFyy0Qq1EQ3hEka52xgEk0aoECaq1jgaq1jgaq1jgaq1i0",
        name: "v2",
        children: [
          {
            src: "https://jummb.us/#j6N05Trolln450s0k0l00e0ft2ca7g0fj09r1O_U000000000000000000i0o3343T5v0pu50f0000qwB18110Oa0d080H-JJAArrqiih999h0E1c0b6T1v0pu01f0000q0B1410Oa6d190AbF8B7Q0471Peb9aR0000E2c0b676T0v0xu00f030o523a28a010q040Oad020w2h6E1c012T3v0pu03f0000q0B1820Oa0d230Sp99f9c9Vppbaa9gE1c0b9T2v0pu02f180q040Oad030w1E0c0T4v0xu04f010q5010q0l320Oaaz6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0c0T3v0Au03f0000q0A1810Oad230SkyAiqjiAccJCDSSE1c0b9T4v0puf0f1a0q050Oa0z6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0c0T3v0tu03f0000q0D1830Oa45d080S__qiiiiiiiiiiiiE1c0bib4zgid18Q4zgid18Q4zgid0005jo001kS0000018Q4zgh4h4h4h4h4h0g410g410g0g410g410g4i4x8i4x8i4x4h4h4h4h4hp29QFAuIEka52xgEka52xgEg530a52xgEka52xgEg520Eo1gEka52xgEka52zgEQt9gEka52xgEka52DgGk0b38Z28zEN8Wciez4zEN8Wciez4zw1if022ez4zEN8Wciez4zEN8U0czwQyf8X4t697hyhQoAt697hyhQFAt697GR4t697hyhQoAt697hyhRXAtz961jbZ0ChUigOczjOlezjN33I2AcziEpaBhFp7lpmLAql38QGduDhUwOAxAql38QGd6hEYIORL0quiFko6BiOuMP5v8QG6kHQWmhQ6iIV6JjOlezjPKyOlnckYBiESqlb9Wz8RYziEp6BhHQWfccFpOdaxBGJeBAr3fbZ29xB-05IcYnM0z00U0bw6P3dvjDOJmTLpO1j8NgaCaa4t0n8yV4zE2V4n8At0n8yV4zE2w2Cte8zFVUKC1Eka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka52xg09UKCq-zf5QMd2xgEka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka52xgEka01j541EQ3hE6yChy52xgFyy0Qq1EQ3hEka52xgEk02Ca9yCwkQ2CwkQ2CwkQ2Cwkw0",
            name: "v3",
          }
        ],
      },
    ]
  },
  pyromaniac: {
    name: "The Pyromaniac",
    src: "https://jummbus.bitbucket.io/#j5N07Unnamedn941s2k0l00e1ot2-a7g1oj07r1O_U0000000000000000000000000000i0o233333333T0v0pue2f0000q8C010m70020Oa7d080w5h3E1b8T7v0Bu07f0000q050Oapd040H_RJSIrsAArrrrrh0IeE0T1v0pu82f0000q8B16110Oa0d030AcFfB7Q0245P7788R0000E2b27iT5v0pu05f0000q0A010n5000Oad030H099jrrAJSSSJG9h0E0T7v0tu38f020o513400q050Oaad0a0Ht7760Md9xb9pb9h1IcE0T7v0tu32f010p500q050Oaad080HU7000U0006000Eh0I9E0T3v0suaef0000q0B1820Oa0d230Sp99f9c9Vppbaa9gE1b9T1v0tu01f012ta00q0C010r5000Oa0d180A8F8B8Q126bPda58R0000E4b862863g78T7v0mu07f010p500q050Oa0d080HU7000U0006000Eh0I9E0T4v0pu04f1a0q050Oajz6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0T3v0tu03f0000qwB17310Oakd080SZIztrsrzrqiiiiiE1b6T3v0pu03f0000qyB1731f0Oakd080SZIztrsrzrqiiiiiE2b6c0hT4v0luf0f1a0q050Oa0z6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0T9v0pu00f0000q00d040E0b8x4y4i8h8x4y4i8h8x4y4i8h8x4y4i8h8x4y4i8h8x40028h8x4y4i8h8x400000000000000ldxkM1goid18Q1go51x8Q4zgldwk6u7xUu0000000000000014h000h4g004h40014h000000004h4h4h4h000h4h4h4h40014h0000000000018Q4zg000004zgid000000id18Q0000018Q4zg000004zgid0000000004zgid18Q000id18Q4zg000004zgid000000id18Q0000018Q4zg000001mu000000005pUlDw00000lDw000000000000000000000001mu5pU00000000000000000j91cA000001cA4Og000000000000000000000000001cA4Og000000id18Q0000018Q4zg000004zgid18Q4zgid18Q4zgid18Q4zg000000000004i8h8w00000h8x4y0000014y4i8h8x4y4i8h8x4y4i8h8x4y0000004x8i4x8i4x8i4x8i4x8i4x8i4x8i4x8i4x8i4x8i4x8i4x8i4x8i4x8i4x814h4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h0k8Ngz52ck8Ngz52ck8Ngz52ck8Ngz52ck8Ngz52ck8M0052ck8Ngz52ck8M000h4g000000014i000000004h8000004h8h4w00000h4x4i4h8h4wc30Mc000000i4x8i0000018i4x8000004x8i4x8i4x8i4x8i4x8i4x8i4x830Mc30p2b5FAu6k9xEkq56xhEkq56xhEqqxnEkq56xhEkq56xhEqqwhQa50zEka17gEk2ew2ChW8zwyexh8UgzEkyezkbZchQOexh8Wp7gFkq5cLQ17g8Wd4zFAt2h8W97k8Z4hQyezi8Wp7gEAt6zi8VQZ0zE4s0hQ2etfg8W17h8W17FGp7i8WB6AnQOeyhQOfgkOeAhQGl8LFAt6Bj8Wp7EG5mxhEkq56xhEka56w0FLE-zdE4ndh2Q265cZ7QlcWvg9CLAqfg7od1EQOfi7DuwerFCnhcLi7DuwerFCnhcIap7EzPLg7dO9BQjbM0YXQ1Ps2pt4OXbfhZ5ej08OmmtfGkBppHWqaBmBumJfwdrRqR2CnWGBhEQqd6zEGd6zcsgQWuo4gkqd6zhEWazhEOQfjFxj8Zl1gliDjFQWteDjFQWtfbGI31QWteDjFQWteDjFwkPn5B2xgQ51cL4a51czk4Ocg0CmChx0OW1BQ3bE0ap69yeg8W97h8W97h8W97h8ZkhQyeyhQieyhQieyhQifh4t4zEAt4zEQqd6zhEQt0hQyeyhQiezhEQqd6zh2ChyqxgEka52xgEka52xgEq2xgEka52xkj5252wbAq6hEk1szeDOl2xgEka52xgEka52xg00UW1wf_Q03n05i05Hw6209Hwa20dHwe02w4qU4wg2Js2Mg3ds3gg3Js3M0hQW01QU8w00",
    children: [
      {
        name: "v1",
        src: "https://jummbus.bitbucket.io/#j5N07Unnamedn962s2k0l00e0Lt2-a7g0Lj0dr1Og769jk0VU0000000000000000000000000000000000i0o233333333T7v0vu07f030p60q72f500q0I021990l600500Oad060HT-SRJJJJIAAAAAh0IaE1c11T7v0Du07f0000q050Oa0d080H_RJSIrsAArrrrrh0I0E0T7v0Hu41f0000q050Oaad080H_RJSIrsAArrrrrh0IaE0T1v0uu82f0000q8B16110Oa0d030AcFfB7Q0245P7788R0000E2b27iT7v0tu38f020o513400q050Oaad0a0Ht7760Md9xb9pb9h1IcE0T7v0tu32f010p500q050Oaad080HU7000U0006000Eh0I9E0T3v0suaef0000q0B1820Oa0d230Sp99f9c9Vppbaa9gE1b9T1v0tu01f012ta00q0C010r5000Oa0d180A8F8B8Q126bPda58R0000E4b862863g78T7v0mu07f010p500q050Oa0d080HU7000U0006000Eh0I9E0T4v0xu04f1a0q050Oajz6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0T3v0Bu03f0000qwB17310Oakd080SZIztrsrzrqiiiiiE1b6T3v0tu03f0000qyB1731f0Oakd080SZIztrsrzrqiiiiiE2b6c0hT4v0tuf0f1a0q050Oa0z6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0T4v0yu04f180q040Oaz777777777888S-JIAArrrrrqiiii-JIAArrrrrqiiii-JIAArrrrrqiiii-JIAArrrrrqiiii-JIAArrrrrqiiii-JIAArrrrrqiiii-JIAArrrrrqiiii-JIAArrrrrqiiii-JIAArrrrrqiiii-IrrjKSSSSSOiii-qrBJJ_____-iii-HsAJST____-iiiE0T4v0duf0f1a0q050Oa0z6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0T9v0pu00f0000q00d040E0T9v0pu00f0000q00d040E0b8x4y4g008x4y4i8h000y4i8h8x40028h52ck8RlDlmsk8Ngz000001gz52dlpRlDCHOtLx8Q4ziqL9S-u7xUu9GYDrUid18Q000h4g004h40014h000h4g004h40014h4zgid18Q4zgid18Q4zgid18Q4zgid18Q000005pUlDw00000lDxmu000001mu5pU000001cA4Og000004Ogj9000000j91cA4zgid18Q4zgid18Q4zgid18Q4zgid18Q4i8h8x4y4i8h8x4y4i8h8x4y4i8h8x4y4x8i4x8i4x8i4x8i4x8i4x8i4x8i4x8i4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h4h52ck8Ngz52ck8Ngz52ck8Ngz52ck8Ngz0M03030Mc30300c000ch4wc00M0Mc30M410g41dk4Rgg410g400g010g410jl1dk00400g0000000g010000000100410g414x8i4w00000i4x8i0000018i4x80000000400g0000000g010000000100410g41p2knFAu6k9xEkq56xhEkq56xhEqqxnEkq56xhEkq56xhEqqwhQa50zEka17gEk2ew02ChWa2FQql6BhFkql6BhFksyFgd6BhFkql6BhFkql7ikql6BhFkqt6BhFQql7klal6BhFkpaziEQWdaz8Wh7h8W54zG4t2AhQqp78W17g8Wd4zFAt2EhQieF8W97i8Wd8zFAt2yhQqd81j8Z4hMh7gEAs8hQah7hG5-C8Wp7gEAtczEkGd2CnW0zE4t6yhQOex8At4zG4uy8Wh7hF4tczEkiezhF4sWuwhQ2e08W17eDE4t0zEAt0zQRczF4tizibWp7h8Wp7Eap7i8WlaAnQOeziFAuwEBZ0OW1BQ3bQ1BQ3bE6nhEB-AG5Z0OW1BQ3bQ1BQ3bE6nhEB-Ai8VeiEVb8QGeiOdazAami8-jpaiEVb8QGeiOdazBquj8Wp7FG5axhEkq56xhE5Z6w00FDE-yFDjW1cRYzhW0X1Ed6ChWgYXQ1PtcOW9BWgYXQ1PtcOW9Bw1j8Z4utW0VKhcKypu07DuwerwjbECm1ppWfEFOo16iOPFZiAHbdvjhkGQHORFY1HuHmE0kO_lkGd6zhEQt5hEQpzy6DjP0y2zhEQqd7hkqd6mxWtc0ap7GEa2GkWteDjFQWteDjFVtlwoeDjFQWteDjFQWtc02CqUIEka6wE9BUxgE9AqwCa8k009BFAogcKwpt0OW002ChyozA2eyhQieyhQieyhQifl4t8zEAt4zEAt4zEAt4zQh7h8W97h8Wd6zhEQqd7g4t8zEAt4zEQqd6zhEQg0FAoCEka52xgEka52xgEka6wEka52xgEl4NgxgE2V6xAq50n8PFYBgEka52xgEka52xgEkd1gEka52xgEka52xgEka52xgEka52xgEka52xg02CtebzFVQWpHw2xOb8kehp2xO0Ws0jFSm1FPgFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkF00077gc1_-w0qU0Gg0Js0Mg1ds1gg1Js1M0k0zn0A20lHwm20pHwq20tHwu02eDg0eD140000e1v_zFQ03FN9k000",
      },
      {
        name: "x1",
        src: "https://jummbus.bitbucket.io/#j5N07Unnamedn752s2k0l00e0Pt2-a7g0Pj0hr1Og769jk0VU0hOverdrive%20Guita09Idiophone000eTubular%20Bell00000000000000000000i0o2333333T7v0vu07f030p60q72f500q0I021990l600500Oad060HT-SRJJJJIAAAAAh0IaE1c11T7v0Du07f0000q050Oa0d080H_RJSIrsAArrrrrh0I0E0T7v0Hu07f0000q050Oaad080H_RJSIrsAArih80h0IaE0T7v0Bu38f020o513400q050Oaad0a0Ht7760Md9xb9pb9h1IcE0T7v0tu32f010p500q050Oaad080HU7000U0006000Eh0I9E0T3v0suaef0000q0B1820Oa0d230Sp99f9c9Vppbaa9gE1b9T7v0su07f010p500q050Oa0d080HU7000U0006000Eh0I9E0T4v0xu04f1a0q050Oa0z6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0T2v0lu02f0000qwB010c60110n710Oa0d080w1E1b6T4v0tuf0f1a0q050Oa0z6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0T4v0yu04f180q040Oaz777777777888S-JIAArrrrrqiiii-JIAArrrrrqiiii-JIAArrrrrqiiii-JIAArrrrrqiiii-JIAArrrrrqiiii-JIAArrrrrqiiii-JIAArrrrrqiiii-JIAArrrrrqiiii-JIAArrrrrqiiii-IrrjKSSSSSOiii-qrBJJ_____-iii-HsAJST____-iiiE0T4v0duf0f1a0q050Oa0z6666ji8k8k3jSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0T9v0pu00f0000q00d040E0T9v0pu00f0000q00d040E0b488h224gwx488h2240000001224gwx488h224gwx488gA4c9132ggM0009130000A4c0002ggM0000000000A4dY8Ov2cDMz88xA28p0000000ewW3EexY8Ov2cwy6g8xA0000y6g8xA00000008xA28p00000000000y6g0000000000000000000000000000000000000000000000000000000000000000000z4g8N4aoW2CewFzEaoW4GmM8N400000000000000000000000000000024gwx480000000y688xy28owy688xy28owy688xy28owy688xy28owy68000000124800048gx2488gx48gx2480000000000gx20c02z00EM00c02z00003ac0Oz00EM00c02z000M0ac00w2080w2080w2080w0000w2080w2080w2080w2080w20001000g004001000g000001000g004001000g004001288wy288wy288wy280000000y288wy288wy288wy288x004001000hw04g010000004o01400i004001600h004p2kkFAu6k9xEkq56xhEkq56xhEqqxnEkq56xhEkq56xhEqqwhQa50zEka17gEk2ew00ap7EEaDhFkql6BhFkql6BhOaB0Qql6BhFkql6BhFkt9hFkql6BhFQql6DhFkthkFkql6BhAGdazjEQGczF4t4zEkieEhQah7hFAszE4t0zEQieChQax7h8WAzEAt8zEQyeChQa97hEQw0kOfh4s4hQa9724t2AhQqxvFyeChQa97j8W5azgFB-w8W17hEAtczEi97h8Wx7EyeAhQqh7j8W54zEQqh7eDE4t0zw2ewhPFW17g8W97g8Zdj8Wh7kEQy-ChQieChW2ChQyeBiF5ZczEQGp7Ea9vgcKwpt0OZ0pt0OW1BQq9vFaxvgcKwpt0OZ0pt0OW1BQq9vF4yejAGeiOdazAIziEV2BAyfASiAGeiOdazAIziEVmDAOfBlgYLQ1Pt0OWd4LR5gYLQ1Pt0OWd4LFDE-yFDjW1cRYzhW0X1Ed6ChWgYXQ1PtcOW9BWgYXQ1PtcOW9Bw05czQhVTE3CV4OW9BU0utW0VK1cKypo0mmuzWasC0hAIIWvkFaOPnQQlaJaYJqv0qTGRHTauDpiBR56ZmBuwmCXakKwRLlHnK-WtBantYZlFnLrjtBanvlLlHk2ChWG2wGBeDjFQWteDjFQWunlo63FQWteDjFQWteDj002CqUIEka6wE9BUxgE9AqwCa8kf452xN2w00apub4OcgEka6gO52xgO6gEq2xgEka52xgEka52xgE001j8NdgEka52xgEka52xgEkd1gEka52xgG9yx2xg5Od38Qa0KhDjVaxgEka52xgEka52xgEq2xgEka52xgEka52xgEka52xgEka52xgEka52xjfhN000FDjyUWuteCqU0EsyO53AmgEsweD00jFSm1FPgFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkFkFiFiBiBaBalakGkF000M91_-w0qU0Gg0Js0Mg1ds1gg1Js1M0k0zn0A20lHwm20pHwq5017jE07jwy00000m2w02_Ytew0te9awa1ZWe7Ww50uZ71Y02wauzwG00000"
      }
    ]
  }
};

for (let songId in songs) {
  const option = document.createElement("option");
  option.innerText = songs[songId].name;
  option.value = songId;
  songSelect.appendChild(option);
}

songSelect.oninput = function () {
  mainNode = songs[songSelect.value];
}

let mainNode = songs.troll;

const nodeSeparationX = 120;
const nodeSeparationY = 120;
const textOffset = 35;
const textOutline = 2;

let selected;
let mouse = {x: 0, y: 0};
let hovered = [];
let lastType = "empty";

window.onresize = function () {
  canvas.width  = window.innerWidth / 2;
  canvas.height = window.innerHeight;
  ctx.font = "bold 25px monospace";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
}

function isNodeHovered(x, y) {
  const px = x + canvas.width / 2;
  const py = y + canvas.height / 2;
  const dist = Math.sqrt((px - mouse.x) ** 2 + (py - mouse.y) ** 2);
  
  return dist < 20;
}

function drawNode(node, x, y) {
  // children and lines
  if (node.children) {
    let count = node.children.length;
    
    for (let childId in node.children) {
      const child = node.children[childId];
      const cx = x + (childId - (count - 1) / 2) * nodeSeparationX;
      
      ctx.strokeStyle = "black";
      ctx.beginPath();
      ctx.moveTo(x, y);
      ctx.lineTo(cx, y - nodeSeparationY);
      ctx.stroke();
      
      drawNode(child, cx, y - nodeSeparationY);
    }
  }
  
  const isHovered = isNodeHovered(x, y);
  if (isHovered) hovered.push(node);
  
  // base node
  ctx.fillStyle = isHovered ? "#666666" : "black";
  ctx.strokeStyle = "lightblue";
  ctx.lineWidth = 5;
  ctx.beginPath();
  ctx.arc(x, y, 20, 0, Math.PI * 2.0);
  ctx.fill();
  if (selected == node) ctx.stroke();
  
  // text outline
  ctx.fillStyle = "white";
  ctx.fillText(node.name ?? "", x + textOutline, y + textOffset);
  ctx.fillText(node.name ?? "", x - textOutline, y + textOffset);
  ctx.fillText(node.name ?? "", x, y + textOffset + textOutline);
  ctx.fillText(node.name ?? "", x, y + textOffset - textOutline);
 
  // text
  ctx.fillStyle = "red";
  ctx.fillText(node.name ?? "", x, y + textOffset);
}

function mousedown() {
  selected = hovered[0];
  
  if (selected) {
    let type = lastType;
    if (selected.src.startsWith("https://jummb.us/")) {
      player.src = "/playerv6/#" + selected.src.slice(18);
      type = "v6";
    } else {
      player.src = "/player/#"   + selected.src.slice(30);
      type = "v5";
    }
    
    if (type != lastType) {
      lastType = type;
    } else {
      player.contentWindow.location.reload();
    }
  }
}

function animate() {
  requestAnimationFrame(animate);
  
  hovered = [];
  
  ctx.resetTransform();
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  ctx.translate(canvas.width / 2, canvas.height / 2);
  
  drawNode(mainNode, 0, 0);
  
  mouse = Input.get_mouse_position();
}

animate();